<div xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:c="http://java.sun.com/jstl/core"
  xmlns:nxl="http://nuxeo.org/nxforms/layout">


<c:if test="#{jbpmActions.canSetTitle}">

 <div class="foldableBox">

    <c:choose>
      <c:when test="#{jbpmActions.showSetTitleForm}">
        <c:set var="h3Class" value="unfolded"/>
        <c:set var="boxBodyStyle" value=""/>
      </c:when>
      <c:otherwise>
        <c:set var="h3Class" value="folded"/>
        <c:set var="boxBodyStyle" value="display: none"/>
      </c:otherwise>
    </c:choose>
    
    <h3 class="#{h3Class}">
      <h:form>
        <h:commandLink actionListener="#{jbpmActions.toggleShowSetTitle}">
          <h:outputText value="#{messages['label.review.choose.title']}"/>
        </h:commandLink>
      </h:form>
    </h3>
    
	<div class="boxBody" style="#{boxBodyStyle}">
    
      <h:form id="setTitleForm">
    
        <table class="dataInput">
          <tbody>
            <tr>
              <td class="labelColumn"><h:outputText value="#{messages['label.review.title']}"/></td>
              <td class="fieldColumn">
                <h:inputText id="theNewTitle" value="#{newTitle}" required="true" />
              </td>
              </tr>
              <tr>
              <td class="labelColumn"></td>
              <td class="fieldColumn">
                 <h:commandButton styleClass="button" type="submit"
            		value="#{messages['label.review.set.title']}"
           			action="#{jbpmActions.setNewTitle(newTitle)}" />
              </td>
           
              </tr>
              
               <tr>
              <td class="labelColumn"><h:outputText value="#{messages['label.review.current.title']}"/> </td>
              <td class="fieldColumn"><h:outputText value="#{jbpmActions.newTitle}"/> </td>
           
            </tr>
            
          </tbody>
        </table>

      </h:form>

    </div>
  </div>
  
 </c:if>
  
 <c:if test="#{!jbpmActions.canSetTitle}">

  <div class="foldableBox">
    
	<div class="boxBody" style="#{boxBodyStyle}">
    
      <h:form id="setTitleForm">
    
        <table class="dataInput">
          <tbody>
   
            <tr>
              <td class="labelColumn"><h:outputText value="#{messages['label.review.agree.urrent.title']}"/> </td>
              <td class="fieldColumn"><h:outputText value="#{jbpmActions.newTitle}"/> </td>
           
            </tr>
            
          </tbody>
        </table>

      </h:form>

    </div>
  </div>
 </c:if>
</div>